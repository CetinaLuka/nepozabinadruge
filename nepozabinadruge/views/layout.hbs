<!DOCTYPE html>
<html>

<head>
  <title>{{title}}</title>
  {{!-- <link rel='stylesheet' href='/stylesheets/style.css' /> --}}
  <link rel='stylesheet' href='/stylesheets/main.css' />
</head>

<body>

  <div class="container 75%" style="border: 1px solid black;">
    <header id="header" class="alt">
      <h1><strong><a href="../../">Spatial</a></strong> by Templated</h1>
      <nav id="nav">
        <ul>
          <li><a href="../../users/login">Login</a></li>
          <li><a href="../../users/register">Register</a></li>
          <li><a href="../../request/list">Requests</a></li>
          <li><a href="../../bot/showchat">Chat Bot</a></li>
        </ul>
      </nav>
    </header>
    {{{body}}}
  </div>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>
  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyCy4I8vK968QoIV1QvWA4UzHG9A2o1vyNE",
      authDomain: "nepozabinadruge.firebaseapp.com",
      databaseURL: "https://nepozabinadruge.firebaseio.com",
      projectId: "nepozabinadruge",
      storageBucket: "nepozabinadruge.appspot.com",
      messagingSenderId: "578222346888",
      appId: "1:578222346888:web:2a43be816fe6a2dd44453d"
    };

    // Initialize Firebase
    if (firebase.apps.length === 0) {
      firebase.initializeApp(firebaseConfig);
    }

    function logout() {
      firebase.auth().signOut()
        .then(function (success) {
          eraseCookie("user");
          eraseCookie("userId");
          window.location.href = "http://localhost:3000/";
        })
        .catch(function (error) {
          // Handle Errors here.
          console.log(error);
        });
    }

    
    function getCookie(name) {
      var nameEQ = name + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }
    function eraseCookie(name) {
      document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    }

    if(getCookie("user")){
      document.getElementById("login").style.visibility = "hidden";
      document.getElementById("register").style.visibility = "hidden";
    }
    else{
      document.getElementById("logout").style.visibility = "hidden";
    }
  </script>
</body>

</html>